#!/bin/bash
curl https://raw.githubusercontent.com/mahdibland/ShadowsocksAggregator/master/Eternity.yml -o config.yaml && sed -i '1s/^/rule-providers:\n  iran_other:\n    type: http\n    format: text\n    behavior: domain\n    url: "https:\/\/github.com\/bootmortis\/iran-hosted-domains\/releases\/latest\/download\/clash_rules_other.txt"\n    path: .\/ruleset\/iran_other.txt\n    interval: 432000\n  iran_ads:\n    type: http\n    format: text\n    behavior: domain\n    url: "https:\/\/github.com\/bootmortis\/iran-hosted-domains\/releases\/latest\/download\/clash_rules_ads.txt"\n    path: .\/ruleset\/iran_ads.txt\n    interval: 432000\ntun:\n  enable: true\n  stack: system\n  auto-route: true\n  auto-redir: true\n  auto-detect-interface: true\n/' config.yaml && sed -i 's/port: 7890/port: 1081/' config.yaml && sed -i 's/socks-port: 7891/socks-port: 1080/' config.yaml && sed -i 's/log-level: info/log-level: silent/' config.yaml && sed -i 's/rules:/rules:\n- RULE-SET,iran_ads,REJECT\n- DOMAIN-SUFFIX,ir,DIRECT\n- RULE-SET,iran_other,DIRECT\n- GEOIP,IR,DIRECT\n/' config.yaml && sed -i 's/ipv6: false/ipv6: true/' config.yaml
